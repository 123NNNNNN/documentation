# https://circleci.com/docs/configuration#machine
machine:
  php:
    # https://circleci.com/docs/environment#php
    version: 5.5.11
  # https://github.com/cloudify-cosmo/getcloudify.org/blob/master/circle.yml
  python:
    version:
      2.7.8 
      
dependencies:
  pre: 
    # Install Drush  
    - composer install --prefer-source --no-interaction --no-dev
    - composer global require drush/drush:6.2.0
    - composer global require sculpin/sculpin:2.0.x-dev 
    # Install Terminus.
    - git clone https://github.com/pantheon-systems/terminus.git $HOME/.drush/terminus 
    - drush cc drush

  # Install additional test dependencies here (like Casper, Behat, etc).
  override:  
    # Build the documentation 
    - sculpin generate
test:
    #
    # This is where you run your tests, be they SimpleTest, Casper, Behat,
    # or otherwise. Here's a SimpleTest example.  
  override:
    # Run the link checker
    - linkchecker http://dev-pantheon-documentation.pantheon.io/ --anchors --no-status --ignore-url=^mailto
  post:
  # Destroy the Pantheon environment
  # - drush psite-edelete $PUUID $PSITE -y

    # Authenticate with Pantheon via Terminus.
    # - drush pauth $PEMAIL --password=$PPASS
